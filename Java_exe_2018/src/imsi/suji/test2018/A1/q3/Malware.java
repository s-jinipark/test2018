package imsi.suji.test2018.A1.q3;

import java.util.ArrayList;
import java.util.List;

public class Malware {
	/**
	 * 1단계 악성코드 제거
	 *
	 * @param inputData List 입력데이터(코드 문자열 목록)
	 * @return List 1단계 악성코드가 제거된 문자열 목록
	 */
	public List<String> getFirstCode(List<String> inputData) {
		List<String> firstCodeNameList = null;
		////////////////////// 여기부터 구현 (1) ---------------->
		firstCodeNameList = new ArrayList<String>();
		
		for (String s : inputData) {
			//System.out.println(">" + s);
			if (s.indexOf(".") > -1) {
				firstCodeNameList.add(s);
			}
		}
		
		///////////////////////////// <-------------- 여기까지 구현 (1)
		return firstCodeNameList;
	}

	/**
	 * 2단계 악성코드 제거
	 *
	 * @param firstCodeNameList List 1단계 악성코드가 제거된 문자열 목록
	 * @return List 2단계 악성코드가 제거된 문자열 목록
	 */
	public List<String> getSecondCode(List<String> firstCodeNameList) {
		List<String> secondCodeNameList = null;
		////////////////////// 여기부터 구현 (2) ---------------->
		secondCodeNameList = new ArrayList<String>();
		
//		for (String s : firstCodeNameList) {
//			//System.out.println(">" + s);
//			String front = s.substring(0, s.indexOf("."));
//			String end = s.substring(s.indexOf("."));
//			//System.out.println(">" + front + " / " + end);
//			char prev = ' ';
//			boolean mal_test = false; // 검사하기 위한 flag
//			for (int i=0 ; i<front.length(); i++) {
//				char tmp = front.charAt(i);
//	
//				if (mal_test) { 
//					if  (  ( prev == 'a' && tmp == 'b')  ||
//						  ( prev == 'a' && tmp == 'x')  ||
//						  ( prev == 'x' && tmp == 'y')  ) 
//					{ // 악성코드가 아님
//						secondCodeNameList.add(front + end);
//					}
//					mal_test = false;
//				}
//				
//				if ( tmp == 'a' || tmp == 'x' ) { // 악성코드
//
//					mal_test = true;
//				}
//				
//				prev = tmp; // prev 셋팅
//				
//			}
//		}
		///////////////////////////// <-------------- 여기까지 구현 (2)
		// -> charAt 으로 순차적 검사 -> 잘 안됨 , indexOf 로 변경
		
//		for (String s : firstCodeNameList) {
//			String front = s.substring(0, s.indexOf("."));
//			String end = s.substring(s.indexOf("."));
//			
//
//			if ( ( front.indexOf("a") >-1 ) && ( front.indexOf("x") >-1 ) ) { //악성코드
//				if ( front.indexOf("ax") >-1 )  { // 예외
//					secondCodeNameList.add(front + end);
//				}
//			} else if ( ( front.indexOf("a") >-1 ) || ( front.indexOf("x") >-1 ) ) { //악성코드
//				if (( front.indexOf("ab") >-1 ) || ( front.indexOf("xy") >-1 )) { // 예외
//					secondCodeNameList.add(front + end);
//				}
//			} else {
//				secondCodeNameList.add(front + end);
//			}
//		}
		
		// -> 이 경우  맨 처음 if 를 분리해야 함 ->> 앞의 if 에 걸린 뒤 두번째 if 에 걸리지 않음
		// 주의 !!
		
		for (String s : firstCodeNameList) {
		String front = s.substring(0, s.indexOf("."));
		String end = s.substring(s.indexOf("."));
		

		if ( ( front.indexOf("a") >-1 ) && ( front.indexOf("x") >-1 ) ) { //악성코드
			if ( front.indexOf("ax") >-1 )  { // 예외
				secondCodeNameList.add(front + end);
			}
		}
		
		if ( ( front.indexOf("a") >-1 ) || ( front.indexOf("x") >-1 ) ) { //악성코드
			if (( front.indexOf("ab") >-1 ) || ( front.indexOf("xy") >-1 )) { // 예외
				secondCodeNameList.add(front + end);
			}
		} else {
			secondCodeNameList.add(front + end);
		}
	} 
		
		
		return secondCodeNameList;
	}
}
